-- Create countries table with flags
CREATE TABLE IF NOT EXISTS public.countries (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  code TEXT UNIQUE NOT NULL, -- ISO 3166-1 alpha-2 code
  name TEXT NOT NULL,
  name_zh TEXT, -- Chinese name
  flag_emoji TEXT NOT NULL, -- Unicode flag emoji
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Enable RLS
ALTER TABLE public.countries ENABLE ROW LEVEL SECURITY;

-- Create policy for public read access
CREATE POLICY "Countries are viewable by everyone"
  ON public.countries
  FOR SELECT
  USING (true);

-- Insert major countries with their flags
INSERT INTO public.countries (code, name, name_zh, flag_emoji) VALUES
  ('CN', 'China', 'ä¸­å›½', 'ğŸ‡¨ğŸ‡³'),
  ('US', 'United States', 'ç¾å›½', 'ğŸ‡ºğŸ‡¸'),
  ('GB', 'United Kingdom', 'è‹±å›½', 'ğŸ‡¬ğŸ‡§'),
  ('JP', 'Japan', 'æ—¥æœ¬', 'ğŸ‡¯ğŸ‡µ'),
  ('KR', 'South Korea', 'éŸ©å›½', 'ğŸ‡°ğŸ‡·'),
  ('FR', 'France', 'æ³•å›½', 'ğŸ‡«ğŸ‡·'),
  ('DE', 'Germany', 'å¾·å›½', 'ğŸ‡©ğŸ‡ª'),
  ('IT', 'Italy', 'æ„å¤§åˆ©', 'ğŸ‡®ğŸ‡¹'),
  ('ES', 'Spain', 'è¥¿ç­ç‰™', 'ğŸ‡ªğŸ‡¸'),
  ('CA', 'Canada', 'åŠ æ‹¿å¤§', 'ğŸ‡¨ğŸ‡¦'),
  ('AU', 'Australia', 'æ¾³å¤§åˆ©äºš', 'ğŸ‡¦ğŸ‡º'),
  ('NZ', 'New Zealand', 'æ–°è¥¿å…°', 'ğŸ‡³ğŸ‡¿'),
  ('BR', 'Brazil', 'å·´è¥¿', 'ğŸ‡§ğŸ‡·'),
  ('MX', 'Mexico', 'å¢¨è¥¿å“¥', 'ğŸ‡²ğŸ‡½'),
  ('AR', 'Argentina', 'é˜¿æ ¹å»·', 'ğŸ‡¦ğŸ‡·'),
  ('CL', 'Chile', 'æ™ºåˆ©', 'ğŸ‡¨ğŸ‡±'),
  ('IN', 'India', 'å°åº¦', 'ğŸ‡®ğŸ‡³'),
  ('RU', 'Russia', 'ä¿„ç½—æ–¯', 'ğŸ‡·ğŸ‡º'),
  ('ZA', 'South Africa', 'å—é', 'ğŸ‡¿ğŸ‡¦'),
  ('EG', 'Egypt', 'åŸƒåŠ', 'ğŸ‡ªğŸ‡¬'),
  ('AE', 'United Arab Emirates', 'é˜¿è”é…‹', 'ğŸ‡¦ğŸ‡ª'),
  ('SA', 'Saudi Arabia', 'æ²™ç‰¹é˜¿æ‹‰ä¼¯', 'ğŸ‡¸ğŸ‡¦'),
  ('TR', 'Turkey', 'åœŸè€³å…¶', 'ğŸ‡¹ğŸ‡·'),
  ('TH', 'Thailand', 'æ³°å›½', 'ğŸ‡¹ğŸ‡­'),
  ('VN', 'Vietnam', 'è¶Šå—', 'ğŸ‡»ğŸ‡³'),
  ('ID', 'Indonesia', 'å°åº¦å°¼è¥¿äºš', 'ğŸ‡®ğŸ‡©'),
  ('MY', 'Malaysia', 'é©¬æ¥è¥¿äºš', 'ğŸ‡²ğŸ‡¾'),
  ('SG', 'Singapore', 'æ–°åŠ å¡', 'ğŸ‡¸ğŸ‡¬'),
  ('PH', 'Philippines', 'è²å¾‹å®¾', 'ğŸ‡µğŸ‡­'),
  ('PK', 'Pakistan', 'å·´åŸºæ–¯å¦', 'ğŸ‡µğŸ‡°'),
  ('BD', 'Bangladesh', 'å­ŸåŠ æ‹‰å›½', 'ğŸ‡§ğŸ‡©'),
  ('NP', 'Nepal', 'å°¼æ³Šå°”', 'ğŸ‡³ğŸ‡µ'),
  ('LK', 'Sri Lanka', 'æ–¯é‡Œå…°å¡', 'ğŸ‡±ğŸ‡°'),
  ('MM', 'Myanmar', 'ç¼…ç”¸', 'ğŸ‡²ğŸ‡²'),
  ('KH', 'Cambodia', 'æŸ¬åŸ”å¯¨', 'ğŸ‡°ğŸ‡­'),
  ('LA', 'Laos', 'è€æŒ', 'ğŸ‡±ğŸ‡¦'),
  ('MN', 'Mongolia', 'è’™å¤', 'ğŸ‡²ğŸ‡³'),
  ('KZ', 'Kazakhstan', 'å“ˆè¨å…‹æ–¯å¦', 'ğŸ‡°ğŸ‡¿'),
  ('UZ', 'Uzbekistan', 'ä¹Œå…¹åˆ«å…‹æ–¯å¦', 'ğŸ‡ºğŸ‡¿'),
  ('AF', 'Afghanistan', 'é˜¿å¯Œæ±—', 'ğŸ‡¦ğŸ‡«'),
  ('IQ', 'Iraq', 'ä¼Šæ‹‰å…‹', 'ğŸ‡®ğŸ‡¶'),
  ('IR', 'Iran', 'ä¼Šæœ—', 'ğŸ‡®ğŸ‡·'),
  ('IL', 'Israel', 'ä»¥è‰²åˆ—', 'ğŸ‡®ğŸ‡±'),
  ('JO', 'Jordan', 'çº¦æ—¦', 'ğŸ‡¯ğŸ‡´'),
  ('LB', 'Lebanon', 'é»å·´å«©', 'ğŸ‡±ğŸ‡§'),
  ('SY', 'Syria', 'å™åˆ©äºš', 'ğŸ‡¸ğŸ‡¾'),
  ('YE', 'Yemen', 'ä¹Ÿé—¨', 'ğŸ‡¾ğŸ‡ª'),
  ('OM', 'Oman', 'é˜¿æ›¼', 'ğŸ‡´ğŸ‡²'),
  ('KW', 'Kuwait', 'ç§‘å¨ç‰¹', 'ğŸ‡°ğŸ‡¼'),
  ('QA', 'Qatar', 'å¡å¡”å°”', 'ğŸ‡¶ğŸ‡¦'),
  ('BH', 'Bahrain', 'å·´æ—', 'ğŸ‡§ğŸ‡­'),
  ('AT', 'Austria', 'å¥¥åœ°åˆ©', 'ğŸ‡¦ğŸ‡¹'),
  ('BE', 'Belgium', 'æ¯”åˆ©æ—¶', 'ğŸ‡§ğŸ‡ª'),
  ('BG', 'Bulgaria', 'ä¿åŠ åˆ©äºš', 'ğŸ‡§ğŸ‡¬'),
  ('HR', 'Croatia', 'å…‹ç½—åœ°äºš', 'ğŸ‡­ğŸ‡·'),
  ('CY', 'Cyprus', 'å¡æµ¦è·¯æ–¯', 'ğŸ‡¨ğŸ‡¾'),
  ('CZ', 'Czech Republic', 'æ·å…‹', 'ğŸ‡¨ğŸ‡¿'),
  ('DK', 'Denmark', 'ä¸¹éº¦', 'ğŸ‡©ğŸ‡°'),
  ('EE', 'Estonia', 'çˆ±æ²™å°¼äºš', 'ğŸ‡ªğŸ‡ª'),
  ('FI', 'Finland', 'èŠ¬å…°', 'ğŸ‡«ğŸ‡®'),
  ('GR', 'Greece', 'å¸Œè…Š', 'ğŸ‡¬ğŸ‡·'),
  ('HU', 'Hungary', 'åŒˆç‰™åˆ©', 'ğŸ‡­ğŸ‡º'),
  ('IE', 'Ireland', 'çˆ±å°”å…°', 'ğŸ‡®ğŸ‡ª'),
  ('LV', 'Latvia', 'æ‹‰è„±ç»´äºš', 'ğŸ‡±ğŸ‡»'),
  ('LT', 'Lithuania', 'ç«‹é™¶å®›', 'ğŸ‡±ğŸ‡¹'),
  ('LU', 'Luxembourg', 'å¢æ£®å ¡', 'ğŸ‡±ğŸ‡º'),
  ('MT', 'Malta', 'é©¬è€³ä»–', 'ğŸ‡²ğŸ‡¹'),
  ('NL', 'Netherlands', 'è·å…°', 'ğŸ‡³ğŸ‡±'),
  ('NO', 'Norway', 'æŒªå¨', 'ğŸ‡³ğŸ‡´'),
  ('PL', 'Poland', 'æ³¢å…°', 'ğŸ‡µğŸ‡±'),
  ('PT', 'Portugal', 'è‘¡è„ç‰™', 'ğŸ‡µğŸ‡¹'),
  ('RO', 'Romania', 'ç½—é©¬å°¼äºš', 'ğŸ‡·ğŸ‡´'),
  ('SK', 'Slovakia', 'æ–¯æ´›ä¼å…‹', 'ğŸ‡¸ğŸ‡°'),
  ('SI', 'Slovenia', 'æ–¯æ´›æ–‡å°¼äºš', 'ğŸ‡¸ğŸ‡®'),
  ('SE', 'Sweden', 'ç‘å…¸', 'ğŸ‡¸ğŸ‡ª'),
  ('CH', 'Switzerland', 'ç‘å£«', 'ğŸ‡¨ğŸ‡­'),
  ('UA', 'Ukraine', 'ä¹Œå…‹å…°', 'ğŸ‡ºğŸ‡¦'),
  ('BY', 'Belarus', 'ç™½ä¿„ç½—æ–¯', 'ğŸ‡§ğŸ‡¾'),
  ('MD', 'Moldova', 'æ‘©å°”å¤šç“¦', 'ğŸ‡²ğŸ‡©'),
  ('RS', 'Serbia', 'å¡å°”ç»´äºš', 'ğŸ‡·ğŸ‡¸'),
  ('BA', 'Bosnia and Herzegovina', 'æ³¢é»‘', 'ğŸ‡§ğŸ‡¦'),
  ('MK', 'North Macedonia', 'åŒ—é©¬å…¶é¡¿', 'ğŸ‡²ğŸ‡°'),
  ('AL', 'Albania', 'é˜¿å°”å·´å°¼äºš', 'ğŸ‡¦ğŸ‡±'),
  ('ME', 'Montenegro', 'é»‘å±±', 'ğŸ‡²ğŸ‡ª'),
  ('KE', 'Kenya', 'è‚¯å°¼äºš', 'ğŸ‡°ğŸ‡ª'),
  ('TZ', 'Tanzania', 'å¦æ¡‘å°¼äºš', 'ğŸ‡¹ğŸ‡¿'),
  ('UG', 'Uganda', 'ä¹Œå¹²è¾¾', 'ğŸ‡ºğŸ‡¬'),
  ('ET', 'Ethiopia', 'åŸƒå¡ä¿„æ¯”äºš', 'ğŸ‡ªğŸ‡¹'),
  ('GH', 'Ghana', 'åŠ çº³', 'ğŸ‡¬ğŸ‡­'),
  ('NG', 'Nigeria', 'å°¼æ—¥åˆ©äºš', 'ğŸ‡³ğŸ‡¬'),
  ('MA', 'Morocco', 'æ‘©æ´›å“¥', 'ğŸ‡²ğŸ‡¦'),
  ('TN', 'Tunisia', 'çªå°¼æ–¯', 'ğŸ‡¹ğŸ‡³'),
  ('DZ', 'Algeria', 'é˜¿å°”åŠåˆ©äºš', 'ğŸ‡©ğŸ‡¿'),
  ('LY', 'Libya', 'åˆ©æ¯”äºš', 'ğŸ‡±ğŸ‡¾'),
  ('SD', 'Sudan', 'è‹ä¸¹', 'ğŸ‡¸ğŸ‡©'),
  ('BW', 'Botswana', 'åšèŒ¨ç“¦çº³', 'ğŸ‡§ğŸ‡¼'),
  ('NA', 'Namibia', 'çº³ç±³æ¯”äºš', 'ğŸ‡³ğŸ‡¦'),
  ('ZW', 'Zimbabwe', 'æ´¥å·´å¸ƒéŸ¦', 'ğŸ‡¿ğŸ‡¼'),
  ('ZM', 'Zambia', 'èµæ¯”äºš', 'ğŸ‡¿ğŸ‡²'),
  ('MZ', 'Mozambique', 'è«æ¡‘æ¯”å…‹', 'ğŸ‡²ğŸ‡¿'),
  ('PE', 'Peru', 'ç§˜é²', 'ğŸ‡µğŸ‡ª'),
  ('CO', 'Colombia', 'å“¥ä¼¦æ¯”äºš', 'ğŸ‡¨ğŸ‡´'),
  ('VE', 'Venezuela', 'å§”å†…ç‘æ‹‰', 'ğŸ‡»ğŸ‡ª'),
  ('EC', 'Ecuador', 'å„ç“œå¤šå°”', 'ğŸ‡ªğŸ‡¨'),
  ('BO', 'Bolivia', 'ç»åˆ©ç»´äºš', 'ğŸ‡§ğŸ‡´'),
  ('PY', 'Paraguay', 'å·´æ‹‰åœ­', 'ğŸ‡µğŸ‡¾'),
  ('UY', 'Uruguay', 'ä¹Œæ‹‰åœ­', 'ğŸ‡ºğŸ‡¾'),
  ('CR', 'Costa Rica', 'å“¥æ–¯è¾¾é»åŠ ', 'ğŸ‡¨ğŸ‡·'),
  ('PA', 'Panama', 'å·´æ‹¿é©¬', 'ğŸ‡µğŸ‡¦'),
  ('GT', 'Guatemala', 'å±åœ°é©¬æ‹‰', 'ğŸ‡¬ğŸ‡¹'),
  ('HN', 'Honduras', 'æ´ªéƒ½æ‹‰æ–¯', 'ğŸ‡­ğŸ‡³'),
  ('NI', 'Nicaragua', 'å°¼åŠ æ‹‰ç“œ', 'ğŸ‡³ğŸ‡®'),
  ('SV', 'El Salvador', 'è¨å°”ç“¦å¤š', 'ğŸ‡¸ğŸ‡»'),
  ('BZ', 'Belize', 'ä¼¯åˆ©å…¹', 'ğŸ‡§ğŸ‡¿'),
  ('IS', 'Iceland', 'å†°å²›', 'ğŸ‡®ğŸ‡¸'),
  ('GL', 'Greenland', 'æ ¼é™µå…°', 'ğŸ‡¬ğŸ‡±'),
  ('FO', 'Faroe Islands', 'æ³•ç½—ç¾¤å²›', 'ğŸ‡«ğŸ‡´'),
  ('AX', 'Ã…land Islands', 'å¥¥å…°ç¾¤å²›', 'ğŸ‡¦ğŸ‡½')
ON CONFLICT (code) DO NOTHING;

-- Create index for faster lookups
CREATE INDEX IF NOT EXISTS idx_countries_code ON public.countries(code);