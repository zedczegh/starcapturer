
/* Base map container styles */
.map-container {
  width: 100%;
  height: 100%;
  z-index: 1;
  will-change: transform;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  transform: translateZ(0);
}

/* Mobile optimized map */
.mobile-optimized {
  /* Disable unnecessary animations */
  pointer-events: auto;
}

/* Remove transition effects for better mobile performance */
.mobile-optimized .leaflet-fade-anim .leaflet-tile,
.mobile-optimized .leaflet-zoom-anim .leaflet-zoom-animated {
  transition: none !important;
  animation: none !important;
}

/* Speed up loading tile effect on mobile */
.mobile-optimized .leaflet-tile-loaded {
  transition: opacity 0.1s !important;
}

/* Optimize marker positioning */
.leaflet-marker-icon {
  transform-origin: bottom center !important;
  will-change: transform;
  backface-visibility: hidden;
  -webkit-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
}

/* Optimize controls for mobile touch */
.leaflet-touch .leaflet-control-zoom a {
  width: 36px !important;
  height: 36px !important;
  line-height: 36px !important;
  font-size: 18px !important;
}

/* Fix iOS Safari issues with fixed positioning */
@supports (-webkit-touch-callout: none) {
  .map-container {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
  
  .leaflet-container {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    height: 100% !important; /* Ensure map container has full height on iOS */
  }
  
  /* iOS Safari specific optimizations */
  .leaflet-marker-icon,
  .leaflet-marker-shadow,
  .leaflet-control,
  .leaflet-pane {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

/* Improve performance for tiled map layers */
.leaflet-tile-container {
  will-change: transform;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

/* Add iOS-specific optimizations */
@media (pointer: coarse) {
  .leaflet-marker-icon,
  .leaflet-marker-shadow {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
  
  .leaflet-container {
    -webkit-overflow-scrolling: touch;
  }
  
  /* Disable animations on panning to improve mobile performance */
  .leaflet-container.moving-panning {
    -webkit-transition: none !important;
    transition: none !important;
  }
}

/* Fix for flickering issue on Safari mobile */
.leaflet-zoom-animated {
  transform-origin: 0 0;
  -webkit-perspective: 1000;
  perspective: 1000;
}

/* Disable GPU effects on maps for better performance */
.leaflet-container canvas {
  image-rendering: optimizeSpeed;
}

/* Make sure the map container is visible */
.leaflet-container {
  opacity: 1 !important;
  visibility: visible !important;
  background-color: #02070e; /* Dark background for better loading appearance */
}

/* Add Visible Map Starting Styles */
.leaflet-container::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(2, 7, 14, 0.8);
  z-index: -1;
}
